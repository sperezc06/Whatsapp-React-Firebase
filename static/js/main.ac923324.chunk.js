(this["webpackJsonpwhatsapp-clone-frontend"]=this["webpackJsonpwhatsapp-clone-frontend"]||[]).push([[0],{68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},87:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c.n(a),n=c(29),i=c.n(n),r=(c(68),c(15)),o=(c(69),c(70),c(54)),j=c.n(o),d=c(102),l=c(100),b=c(55),h=c.n(b),u=c(42),O=c.n(u),m=c(43),p=c.n(m),x=(c(71),c(32)),f=x.a.initializeApp({apiKey:"AIzaSyB088aW1UTluW97wrUBluJyyNpoAh26Sj0",authDomain:"whatsapp-clone-e2938.firebaseapp.com",databaseURL:"https://whatsapp-clone-e2938-default-rtdb.firebaseio.com",projectId:"whatsapp-clone-e2938",storageBucket:"whatsapp-clone-e2938.appspot.com",messagingSenderId:"317514429795",appId:"1:317514429795:web:5afc70777975826b950f56",measurementId:"G-80ZJVH6D53"}).firestore(),v=x.a.auth(),g=new x.a.auth.GoogleAuthProvider,_=f,N=c(33),S=c(4);var w=function(e){var t,c=e.id,s=e.name,n=e.addNewChat,i=Object(a.useState)(""),o=Object(r.a)(i,2),j=o[0],l=o[1],b=Object(a.useState)(""),h=Object(r.a)(b,2),u=h[0],O=h[1];return Object(a.useEffect)((function(){c&&_.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return O(e.docs.map((function(e){return e.data()})))}))})),Object(a.useEffect)((function(){l(Math.floor(5e3*Math.random()))}),[]),n?Object(S.jsx)("div",{onClick:function(){var e=prompt("Please enter name for chat");e&&_.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(S.jsx)("h2",{children:"Add new chat"})}):Object(S.jsx)(N.b,{to:"/rooms/".concat(c),children:Object(S.jsxs)("div",{className:"sidebarChat",children:[Object(S.jsx)(d.a,{src:"https://avatars.dicebear.com/api/human/".concat(j,".svg")}),Object(S.jsxs)("div",{className:"sidebarChat__info",children:[Object(S.jsx)("h2",{children:s}),Object(S.jsx)("p",{children:null===(t=u[0])||void 0===t?void 0:t.message})]})]})})},y=Object(a.createContext)(),C=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(S.jsx)(y.Provider,{value:Object(a.useReducer)(t,c),children:s})},I=function(){return Object(a.useContext)(y)};var k=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],s=t[1],n=I(),i=Object(r.a)(n,2),o=i[0].user;return i[1],Object(a.useEffect)((function(){var e=_.collection("rooms").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(S.jsxs)("div",{className:"sidebar",children:[Object(S.jsxs)("div",{className:"sidebar__header",children:[Object(S.jsx)(d.a,{src:null===o||void 0===o?void 0:o.photoURl}),Object(S.jsxs)("div",{className:"sidebar__headerRight",children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(j.a,{})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(h.a,{})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(O.a,{})})]})]}),Object(S.jsx)("div",{className:"sidebar__search",children:Object(S.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(S.jsx)(p.a,{}),Object(S.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(S.jsxs)("div",{className:"sidebar__chats",children:[Object(S.jsx)(w,{addNewChat:!0}),c.map((function(e){return Object(S.jsx)(w,{id:e.id,name:e.data.name},e.id)}))]})]})},D=(c(84),c(56)),E=c.n(D),T=c(57),B=c.n(T),U=c(58),A=c.n(U),P=c(10);var R=function(){var e,t,c=Object(a.useState)(""),s=Object(r.a)(c,2),n=s[0],i=s[1],o=Object(a.useState)(""),j=Object(r.a)(o,2),b=j[0],h=j[1],u=Object(P.f)().roomId,m=Object(a.useState)(""),f=Object(r.a)(m,2),v=f[0],g=f[1],N=Object(a.useState)([]),w=Object(r.a)(N,2),y=w[0],C=w[1],k=I(),D=Object(r.a)(k,2),T=D[0].user;return D[1],Object(a.useEffect)((function(){u&&(_.collection("rooms").doc(u).onSnapshot((function(e){return g(e.data().name)})),_.collection("rooms").doc(u).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return C(e.docs.map((function(e){return e.data()})))})))}),[u]),Object(a.useEffect)((function(){i(Math.floor(5e3*Math.random()))}),[u]),Object(S.jsxs)("div",{className:"chat",children:[Object(S.jsxs)("div",{className:"chat__header",children:[Object(S.jsx)(d.a,{src:"https://avatars.dicebear.com/api/human/".concat(n,".svg")}),Object(S.jsxs)("div",{className:"chat__headerInfo",children:[Object(S.jsx)("h3",{children:v}),Object(S.jsxs)("p",{children:["Last senn ","",new Date(null===(e=y[y.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString(),")"]})]}),Object(S.jsxs)("div",{className:"chat__headerRight",children:[Object(S.jsx)(l.a,{children:Object(S.jsx)(p.a,{})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(E.a,{})}),Object(S.jsx)(l.a,{children:Object(S.jsx)(O.a,{})})]})]}),Object(S.jsx)("div",{className:"chat__body",children:y.map((function(e){var t;return Object(S.jsxs)("p",{className:"chat__message ".concat(e.name===T.displayName&&"chat__reciever"),children:[Object(S.jsx)("span",{className:"chat__name",children:e.name}),e.message,Object(S.jsxs)("span",{className:"chat__timestamp",children:[" ",new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]})}))}),Object(S.jsxs)("div",{className:"chat__footer",children:[Object(S.jsx)(B.a,{}),Object(S.jsxs)("form",{children:[Object(S.jsx)("input",{value:b,onChange:function(e){return h(e.target.value)},placeholder:"Type a message",type:"text"}),Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),console.log("You typed >>> ",b),_.collection("rooms").doc(u).collection("messages").add({message:b,name:T.displayName,timestamp:x.a.firestore.FieldValue.serverTimestamp()}),h("")},type:"submit",children:"Send a message"})]}),Object(S.jsx)(A.a,{})]})]})},W=c(59),F=c(101),M=(c(85),c(48)),J="SET_USER",L=function(e,t){switch(t.type){case J:return Object(M.a)(Object(M.a)({},e),{},{user:t.user});default:return e}};var G=function(){var e=I(),t=Object(r.a)(e,2);Object(W.a)(t[0]);var c=t[1];return Object(S.jsx)("div",{className:"login",children:Object(S.jsxs)("div",{className:"login__container",children:[Object(S.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:""}),Object(S.jsx)("div",{className:"login__text",children:Object(S.jsx)("h1",{children:"Sign in to Whatsapp"})}),Object(S.jsx)(F.a,{type:"submit",onClick:function(){v.signInWithPopup(g).then((function(e){c({type:J,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign in With Google"})]})})};var z=function(){var e=I(),t=Object(r.a)(e,2),c=t[0].user;return t[1],Object(S.jsx)("div",{className:"app",children:c?Object(S.jsx)("div",{className:"app__body",children:Object(S.jsxs)(N.a,{children:[Object(S.jsx)(k,{}),Object(S.jsxs)(P.c,{children:[Object(S.jsx)(P.a,{path:"/rooms/:roomId",children:Object(S.jsx)(R,{})}),Object(S.jsx)(P.a,{path:"/",children:Object(S.jsx)(R,{})})]})]})}):Object(S.jsx)(G,{})})},V=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,103)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),a(e),s(e),n(e),i(e)}))};i.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(C,{initialState:{user:null},reducer:L,children:Object(S.jsx)(z,{})})}),document.getElementById("root")),V()}},[[87,1,2]]]);
//# sourceMappingURL=main.ac923324.chunk.js.map